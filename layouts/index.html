{{ define "main" }}

{{ partial "hero.html" . }}

<div class="container">
  <div class="section__info">
    <div class="section__head">
      <h2 class="section__title">{{ .Site.Params.blog.blog__title | safeHTML }}</h2>
      {{ if .Site.Params.blog.blog__description }}
        <p class="section__description">{{ .Site.Params.blog.blog__description }}</p>
      {{ end }}
    </div>
  </div>

  <div class="row grid">
    <!-- {{ $paginator := .Paginate (where .Site.RegularPages "Type" "posts") }}
    {{ range $paginator.Pages }}
      {{ partial "article.html" . }}
    {{ end }} -->
    {{ $paginator := .Paginate (where .Data.Pages "Type" "ne" "page") (index .Site.Params "paginate" | default 7) }}
    {{ range  where .Paginator.Pages "Type" "ne" "page" }}
    
            {{  if or (fileExists (print "layouts/partials/content-type/" .Type ".html") ) (fileExists (print "themes/bilberry-hugo-theme/layouts/partials/content-type/" .Type ".html")) }}
                {{ partial (print "content-type/" .Type ".html") (dict "ctx" . "template_type" "multiple") }}
            {{ else }}
                {{ partial "content-type/article.html" (dict "ctx" . "template_type" "multiple") }}
            {{ end }}

    {{ end }}

  </div>
</div>

{{ partial "pagination.html" . }}

{{ partial "tags-section.html" . }}

{{ end }}